[gcode_macro PREHEAT]
description: Park printhead and optionally start Nevermore for preheat
gcode:
  {% set fan = params.FAN|default(0)|int %}
  {% set user = printer['gcode_macro _USER_VARIABLE'] %}
  
  {% if fan == 1 %}
    SET_FAN_SPEED FAN=bed_fans SPEED=1                    # Turn on bed fan to circulate & accelerate chamber soak
  {% endif %}
  
  _CG28                                                    # Conditional Home
  PARKBED                                       # Park toolhead 15mm above bed in middle of build volume